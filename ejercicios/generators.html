<html>
  <head>
    <title>Generators</title>
  </head>

  <body>
    <a href="/ejercicios/">Go back</a>
    <p><em>Abre la consola</em></p>

    <script>
    // Los generadores son funciones de las que se peude salir y volver a entrar.
    // Su contexto (asociacion de variables) sera conservado entre las reentradas.
    // Cada vez qye llamamos next, la ejecucion del generador va a continuar hasta el proximo yield You, a few seconds ago uncommitted changes
    function* simpleGeneator(){
        console.log('GENERATOR START')
        yield 1;
        yield 2;
        yield 3;
        console.log('GENERATOR END')
    }
    const gen = simpleGeneator()
    // Podemos hacer generadores infinitos.

    function* idMaker(){
        let id = 1;
        while(true){
            yield id;
            id = id + 1; 
        }
    }
    // Cuando llamamos next tambien podemos pasar valores que la funcion recibe.
    function* idMakerWithReset(){
        let id = 1;
        let reset;
        while(true){
           reset = yield id;

           if(reset){
               id = 1;
           }else{
               id = id + 1; 
           }
        }
    }
    // Ahora hagamos un ejemplo un poco mas complejo: la secuencia fibonacci.

    function* fibonacci(){
        let a = 1;
        let b = 1;

        while(true){
            const nextNumber = a + b;

            a = b;
            b = nextNumber;
            yield nextNumber;
        }
    }

    </script>
  </body>
</html>
